# API Gateway FxA Events Handler

## Endpoints:

- `/events` - This endpoints receives requests with an `Authorization` header using the [Security Event Token (SET)](https://datatracker.ietf.org/doc/html/rfc8417) format.

## SQS event data schema:

The following describes the properties of the data format for the SQS messages generated by this service.

- `user_id` - FxA user ID
  - type: String
  - required: `true`
- `event` - The event for the action performed by the user
  - type: String
  - accepted values: `apple_migration`, `password_change`, `profile_update`, `user_delete`
  - required: `true`
- `timestamp` - Unix timestamp for the event
  - type: Integer
  - required: `true`
- `email` -- The new primary email address for the given user (sub). Undefined if not changed
  - type: String
  - required: `false`

### Example SQS event messages

#### User deleted event

```json
{
  "user_id": "fxa-user-id",
  "event": "user_delete",
  "timestamp": "1637274084"
}
```

#### User profile updated event

```json
{
  "user_id": "fxa-user-id",
  "event": "profile_update",
  "timestamp": "1637274084",
  "user_email": "test@example.com"
}
```
